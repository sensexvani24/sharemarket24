{{- /* Clean Minimalist Header - No APIs, No Complications */}}
{{- if (not site.Params.disableThemeToggle) }}
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }
</script>
{{- end }}

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="{{ "/" | absLangURL }}" accesskey="h" title="{{ site.Title }} (Alt + H)">
                {{- if site.Params.label.icon }}
                <img src="{{ site.Params.label.icon | absURL }}" alt="{{ site.Params.label.text | default site.Title }}" 
                     aria-label="logo" height="24">
                {{- end }}
                <span class="logo-text">{{ site.Params.label.text | default site.Title }}</span>
            </a>
        </div>

        <ul id="menu">
            {{- $currentPage := . }}
            {{- range site.Menus.main }}
            {{- $menuURL := .URL | absLangURL }}
            {{- $pageURL := $currentPage.Permalink | absLangURL }}
            {{- $isMenuCurrent := eq $menuURL $pageURL }}
            <li>
                <a href="{{ .URL | absLangURL }}" 
                   title="{{ .Title | default .Name }}"
                   {{- if $isMenuCurrent }} class="active"{{- end }}>
                    <span>{{ .Name }}</span>
                </a>
            </li>
            {{- end }}
        </ul>

        <div class="logo-switches">
            {{- if (not site.Params.disableThemeToggle) }}
            <button id="theme-toggle" accesskey="t" title="Toggle Theme (Alt + T)" aria-label="Toggle theme">
                <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                     fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                     stroke-linejoin="round">
                    <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                </svg>
                <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                     fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                     stroke-linejoin="round">
                    <circle cx="12" cy="12" r="5"></circle>
                    <line x1="12" y1="1" x2="12" y2="3"></line>
                    <line x1="12" y1="21" x2="12" y2="23"></line>
                    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                    <line x1="1" y1="12" x2="3" y2="12"></line>
                    <line x1="21" y1="12" x2="23" y2="12"></line>
                    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                </svg>
            </button>
            {{- end }}
        </div>
    </nav>
</header>

<style>
/* Clean Header Styling - Tighter Spacing */
.header {
    position: sticky;
    top: 0;
    z-index: 1000;
    background: var(--theme);
    border-bottom: 1px solid var(--border);
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
}

.nav {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 20px; /* Reduced from default padding */
    max-width: 1200px;
    margin: 0 auto;
    min-height: 50px; /* Reduced header height */
}

.logo {
    display: flex;
    align-items: center;
    gap: 8px; /* Reduced gap */
}

.logo a {
    display: flex;
    align-items: center;
    gap: 8px;
    text-decoration: none;
    color: var(--primary);
    font-size: 22px; /* Slightly smaller */
    font-weight: 700;
}

.logo-text {
    color: var(--primary);
    transition: color 0.3s ease;
}

.logo a:hover .logo-text {
    color: var(--secondary);
}

#menu {
    display: flex;
    list-style: none;
    margin: 0;
    padding: 0;
    gap: 20px; /* Reduced gap between menu items */
}

#menu li a {
    padding: 8px 12px; /* Reduced padding */
    color: var(--secondary);
    text-decoration: none;
    font-weight: 500;
    border-radius: 6px;
    transition: all 0.3s ease;
    font-size: 15px; /* Slightly smaller */
}

#menu li a:hover,
#menu li a.active {
    color: var(--primary);
    background: var(--border);
}

.logo-switches {
    display: flex;
    align-items: center;
}

#theme-toggle {
    background: none;
    border: none;
    color: var(--secondary);
    cursor: pointer;
    padding: 6px; /* Reduced padding */
    border-radius: 6px;
    transition: all 0.3s ease;
}

#theme-toggle:hover {
    background: var(--border);
    color: var(--primary);
}

/* Mobile Responsive */
@media (max-width: 768px) {
    .nav {
        padding: 6px 15px;
        flex-wrap: nowrap; /* Prevent wrapping */
        min-height: 45px;
        justify-content: space-between;
    }
    
    .logo a {
        font-size: 16px; /* Smaller logo on mobile */
        gap: 4px;
    }
    
    #menu {
        gap: 8px; /* Much tighter menu spacing */
        font-size: 12px; /* Smaller menu text */
    }
    
    #menu li a {
        padding: 4px 6px; /* Smaller menu padding */
        font-size: 12px;
    }
    
    #theme-toggle {
        padding: 4px;
    }
}

/* Extra small screens */
@media (max-width: 480px) {
    .nav {
        padding: 4px 10px;
    }
    
    .logo a {
        font-size: 15px; /* Even smaller */
    }
    
    #menu {
        gap: 6px;
    }
    
    #menu li a {
        padding: 3px 5px;
        font-size: 11px;
    }
}

/* Dark mode support */
body.dark #moon {
    display: none;
}

body:not(.dark) #sun {
    display: none;
}
</style>