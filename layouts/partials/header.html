{{- /* theme-toggle is enabled */}}
{{- if (not site.Params.disableThemeToggle) }}
{{- /* theme is light */}}
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark');
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }
</script>
{{- end }}

<header class="header">
    <!-- Stock Market Ticker -->
    <div class="market-ticker">
        <div class="ticker-container">
            <div class="ticker-content">
                <span class="ticker-item">
                    <strong>DJIA:</strong> <span class="price" data-symbol="DJIA">Loading...</span>
                    <span class="change positive">+0.5%</span>
                </span>
                <span class="ticker-item">
                    <strong>S&P 500:</strong> <span class="price" data-symbol="SPX">Loading...</span>
                    <span class="change positive">+0.3%</span>
                </span>
                <span class="ticker-item">
                    <strong>NASDAQ:</strong> <span class="price" data-symbol="IXIC">Loading...</span>
                    <span class="change negative">-0.2%</span>
                </span>
                <span class="ticker-item">
                    <strong>GOLD:</strong> <span class="price" data-symbol="GC">$2,050</span>
                    <span class="change positive">+1.2%</span>
                </span>
            </div>
        </div>
    </div>

    <!-- Main Navigation -->
    <nav class="nav">
        <div class="logo">
            {{- if site.Params.label.icon }}
            <img src="{{ site.Params.label.icon | absURL }}" alt="{{ site.Params.label.text | default site.Title }}" 
                 aria-label="logo" height="30">
            {{- else if hasPrefix site.Params.label.iconSVG "<svg" }}
            {{ site.Params.label.iconSVG | safeHTML }}
            {{- end }}
            <span class="logo-text">{{ site.Params.label.text | default site.Title }}</span>
        </div>

        <ul id="menu">
            {{- $currentPage := . }}
            {{- range site.Menus.main }}
            {{- $menuURL := .URL | absLangURL }}
            {{- $pageURL := $currentPage.Permalink | absLangURL }}
            {{- $isMenuCurrent := eq $menuURL $pageURL }}
            <li>
                <a href="{{ .URL | absLangURL }}" 
                   title="{{ .Title | default .Name }}"
                   {{- if $isMenuCurrent }} class="active"{{- end }}>
                    <span>{{ .Name }}</span>
                </a>
            </li>
            {{- end }}
        </ul>

        <div class="header-actions">
            {{- if (not site.Params.disableThemeToggle) }}
            <button id="theme-toggle" accesskey="t" title="Toggle Theme">
                <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                     fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                     stroke-linejoin="round">
                    <path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"></path>
                    <path d="m5 3 1.9 5.7a2 2 0 0 0 1.4 1.4L14 12l-5.7 1.9a2 2 0 0 0-1.4 1.4L5 21l-1.9-5.7a2 2 0 0 0-1.4-1.4L0 12l5.7-1.9A2 2 0 0 0 6.1 8.7L5 3Z"></path>
                </svg>
                <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                     fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                     stroke-linejoin="round">
                    <circle cx="12" cy="12" r="5"></circle>
                    <path d="M12 1v2M12 21v2M4.2 4.2l1.4 1.4M18.4 18.4l1.4 1.4M1 12h2M21 12h2M4.2 19.8l1.4-1.4M18.4 5.6l1.4-1.4"></path>
                </svg>
            </button>
            {{- end }}

            {{- if site.Params.ShowShareButtons }}
            <button id="share-toggle" title="Share">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"></path>
                    <polyline points="16,6 12,2 8,6"></polyline>
                    <line x1="12" y1="2" x2="12" y2="15"></line>
                </svg>
            </button>
            {{- end }}
        </div>
    </nav>
</header>